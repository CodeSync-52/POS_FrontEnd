<template>
  <div
    class="mx-auto max-w-[400px]"
    style="font-family: 'Courier New', Courier, monospace"
  >
    <div class="flex flex-col">
      <div style="margin-bottom: 0.5rem; text-align: center">
        <div
          style="
            margin: 0 auto 1rem;
            width: 100%;
            display: flex;
            justify-content: center;
          "
        >
          <svg
            version="1.0"
            xmlns="http://www.w3.org/2000/svg"
            width="10rem"
            height="3rem"
            viewBox="0 0 300.000000 92.000000"
            preserveAspectRatio="xMidYMid meet"
          >
            <g
              transform="translate(0.000000,92.000000) scale(0.100000,-0.100000)"
              fill="#000000"
              stroke="none"
            >
              <path
                d="M345 871 c-63 -39 -95 -92 -95 -157 0 -24 5 -34 15 -34 10 0 15 10 15 33 0 79 68 147 149 147 83 0 151 -64 151 -142 0 -27 4 -38 15 -38 18 0 20 54 4 97 -13 34 -55 80 -91 99 -39 20 -127 18 -163 -5z"
              />
              <path
                d="M2623 730 c-32 -13 -55 -54 -55 -97 0 -29 7 -43 31 -65 41 -37 81 -37 123 1 28 25 32 35 31 72 -3 73 -65 115 -130 89z m73 -65 c32 -49 -23 -99 -66 -60 -24 22 -25 34 -4 63 20 29 50 28 70 -3z"
              />
              <path
                d="M2860 733 c-75 -5 -90 -14 -90 -57 0 -45 16 -56 77 -56 39 0 53 -4 53 -14 0 -11 -13 -13 -61 -9 l-61 6 4 -29 c3 -29 3 -29 68 -27 53 2 68 6 83 24 21 26 21 38 1 68 -14 20 -23 22 -68 19 -45 -3 -52 0 -54 16 -1 17 4 18 59 13 l59 -7 0 30 c0 17 -1 29 -2 28 -2 -1 -32 -3 -68 -5z"
              />
              <path
                d="M171 717 c-48 -24 -62 -58 -77 -178 -7 -63 -13 -125 -13 -139 0 -50 31 52 44 146 7 50 17 99 23 110 11 21 66 57 74 48 3 -3 8 2 11 11 8 19 -27 20 -62 2z"
              />
              <path
                d="M308 714 c18 -12 45 -15 136 -12 63 2 112 6 110 10 -2 3 2 9 8 11 7 3 -52 6 -132 6 -134 1 -143 0 -122 -15z"
              />
              <path
                d="M634 715 c8 -8 21 -15 28 -15 19 -1 54 -31 62 -55 4 -11 10 -49 13 -85 3 -36 14 -87 24 -115 17 -50 18 -50 18 -15 1 62 -21 214 -35 242 -17 32 -61 58 -99 58 -24 0 -25 -2 -11 -15z"
              />
              <path
                d="M2380 635 c0 -95 0 -95 25 -95 18 0 25 5 25 20 0 16 7 20 34 20 48 0 86 33 86 76 0 55 -28 74 -105 74 l-65 0 0 -95z m118 21 c-2 -16 -11 -22 -38 -24 -32 -3 -35 -1 -36 25 -1 27 1 28 38 25 33 -4 39 -7 36 -26z"
              />
              <path
                d="M212 671 c-10 -6 -6 -13 15 -26 15 -11 36 -18 46 -18 21 2 47 27 47 45 0 8 -4 7 -11 -4 -13 -23 -76 -25 -81 -3 -2 9 -8 12 -16 6z"
              />
              <path
                d="M540 669 c0 -20 28 -39 57 -39 32 0 53 16 53 39 -1 13 -2 13 -11 -1 -13 -23 -79 -25 -79 -3 0 8 -4 15 -10 15 -5 0 -10 -5 -10 -11z"
              />
              <path
                d="M203 475 c-155 -78 -178 -282 -44 -397 62 -53 102 -60 297 -56 190 4 221 13 282 82 27 31 62 116 62 152 0 53 -25 117 -63 160 -67 76 -93 84 -303 84 -173 0 -182 -1 -231 -25z m210 -7 c2 -7 -13 -32 -34 -54 -49 -54 -59 -94 -59 -236 l0 -118 -34 0 c-48 0 -124 54 -154 110 -20 38 -23 55 -19 112 4 56 9 73 37 108 29 37 83 70 135 83 43 10 123 7 128 -5z m215 -24 c96 -40 141 -128 120 -231 -14 -62 -76 -125 -140 -141 -26 -7 -95 -12 -154 -12 l-106 0 4 128 c4 137 13 165 65 214 58 56 140 72 211 42z"
              />
              <path
                d="M498 364 c-43 -23 -58 -63 -58 -150 l0 -76 81 4 c79 3 82 4 115 40 25 28 34 47 34 73 0 96 -91 153 -172 109z m107 -49 c34 -33 33 -78 -2 -111 -22 -20 -35 -24 -72 -22 l-46 3 -3 56 c-3 51 0 59 24 78 35 28 69 27 99 -4z"
              />
              <path
                d="M1025 431 c-158 -12 -205 -75 -205 -273 0 -109 9 -120 55 -73 22 22 25 32 25 105 0 123 36 170 130 170 30 0 47 6 65 25 23 22 34 57 18 53 -5 -1 -44 -4 -88 -7z"
              />
              <path
                d="M1264 431 c-89 -7 -117 -21 -160 -77 -21 -27 -29 -50 -32 -93 -5 -74 21 -130 80 -168 36 -24 54 -28 130 -31 96 -4 102 0 65 43 -18 21 -35 28 -84 34 -71 8 -98 27 -113 79 -19 71 38 142 116 142 23 0 50 3 59 6 29 11 53 80 26 72 -3 0 -42 -4 -87 -7z"
              />
              <path
                d="M2850 431 c-117 -9 -160 -52 -160 -159 0 -36 -6 -75 -15 -91 -13 -27 -67 -56 -79 -44 -9 10 -66 -19 -76 -38 -19 -34 -11 -39 55 -39 74 0 119 16 154 54 20 21 25 40 31 113 6 77 10 89 34 110 18 15 40 23 65 23 26 0 44 7 59 23 21 22 30 59 15 55 -5 -1 -42 -4 -83 -7z"
              />
              <path
                d="M1495 414 c-129 -67 -141 -239 -23 -320 39 -28 48 -29 167 -32 l126 -4 -3 114 c-1 62 -5 123 -8 135 -6 29 -59 90 -95 109 -37 19 -126 18 -164 -2z m134 -69 c40 -20 61 -71 61 -148 l0 -65 -62 4 c-35 2 -71 4 -81 4 -10 0 -32 13 -48 29 -24 24 -29 38 -29 76 0 40 5 52 34 81 38 38 77 44 125 19z"
              />
              <path
                d="M1897 409 c-20 -11 -49 -38 -65 -61 -25 -39 -27 -50 -30 -165 -3 -108 -2 -123 13 -123 9 0 27 11 40 25 23 22 25 32 25 114 0 81 2 92 26 120 47 57 137 50 175 -13 15 -24 19 -50 19 -114 0 -75 2 -85 25 -107 48 -49 55 -37 55 91 l0 116 34 34 c39 39 80 45 125 18 44 -26 55 -52 59 -152 4 -84 7 -94 30 -112 13 -11 30 -20 36 -20 15 0 5 247 -11 276 -55 97 -197 125 -283 56 l-38 -31 -18 20 c-47 52 -147 65 -217 28z m257 -93 c-10 -31 -14 -33 -30 -12 -20 28 -18 34 11 34 21 0 24 -4 19 -22z"
              />
              <path
                d="M1273 283 c-62 -3 -73 -7 -78 -24 -10 -32 12 -49 65 -49 27 0 56 3 65 6 28 11 54 82 26 72 -3 -1 -38 -4 -78 -5z"
              />
            </g>
          </svg>
        </div>
        <div>
          <span>{{ receiptDetail?.shopName }}</span>
        </div>
        <div style="margin-bottom: 1rem">
          <span>{{ receiptDetail?.address }}</span>
        </div>
      </div>
      <div
        style="
          margin-bottom: 0.5rem;
          display: flex;
          align-items: center;
          gap: 0.5rem;
        "
      >
        <span>Receipt #: </span>
        <span>{{ receiptDetail?.saleId }}</span>
      </div>
      <div
        style="
          margin-bottom: 0.5rem;
          display: flex;
          align-items: center;
          gap: 0.5rem;
        "
      >
        <span>Date: </span>
        <span>{{
          moment(receiptDetail?.saleDate).format('D-MMM-YYYY h:mm:ss A')
        }}</span>
      </div>
      <div
        style="
          display: grid !important;
          gap: 0.5rem;
          border-style: dotted;
          border-color: rgba(0, 0, 0, 0.7);
          border-width: 0.5px 0;
        "
        :style="
          isFirstSample === 'first'
            ? 'grid-template-columns: 1fr 1fr 1fr 1fr 2fr'
            : 'grid-template-columns: 1fr 1fr 1fr'
        "
      >
        <span
          v-for="header in filteredTableColumn"
          :key="header"
          style="font-weight: bold"
          :style="header === 'Amt' ? 'text-align:right' : 'text-align:left'"
        >
          {{ header }}
        </span>
      </div>
      <div
        v-for="product in receiptDetail?.saleDetailInfos"
        :key="product.inventoryId"
        style="display: grid !important; gap: 0.5rem; padding: 0.3rem 0"
        :style="
          isFirstSample === 'first'
            ? 'grid-template-columns: 1fr 1fr 1fr 1fr 2fr'
            : 'grid-template-columns: 1fr 1fr 1fr'
        "
      >
        <span class="text-base">{{ product.productName }}</span>
        <span class="text-base">{{
          product.isReturn
            ? product.dispatchQuantity * -1
            : product.dispatchQuantity
        }}</span>
        <span v-if="isFirstSample === 'first'" class="text-base">{{
          product.retailPrice
        }}</span>
        <span v-if="isFirstSample === 'first'" class="text-base">{{
          product.discount
        }}</span>
        <span class="text-base" style="text-align: right">
          {{ product.isReturn ? product.amount * -1 : product.amount }}</span
        >
      </div>
      <div
        style="
          display: grid !important;
          gap: 0.5rem;
          padding: 0.3rem 0;
          border-style: dotted;
          border-color: rgba(0, 0, 0, 0.7);
          border-width: 0.5px 0;
        "
        :style="
          isFirstSample === 'first'
            ? 'grid-template-columns: 1fr 1fr 1fr 1fr 2fr'
            : 'grid-template-columns: 1fr 1fr 1fr'
        "
      >
        <span>Total</span>
        <span>{{ receiptDetail?.totalQuantity }}</span>
        <span v-if="isFirstSample === 'first'"></span>
        <span v-if="isFirstSample === 'first'">{{
          receiptDetail?.totalDiscount
        }}</span>
        <span style="text-align: right">{{
          receiptDetail?.totalSalesAmount
        }}</span>
      </div>
      <div
        style="
          display: grid !important;
          gap: 0.5rem;
          padding: 0.3rem 0;
          border-style: dotted;
          border-color: rgba(0, 0, 0, 0.7);
          border-width: 0 0 0.5px;
          grid-template-columns: 1fr 1fr 1fr;
        "
      >
        <span></span>
        <span style="font-weight: bold">Net Total</span>
        <span style="text-align: right; font-weight: bold">
          {{ receiptDetail?.netAmount }}
        </span>
      </div>
      <p style="white-space: pre; text-transform: uppercase">
        {{ receiptDescriptionNote.description }}
      </p>
      <div
        style="
          display: flex;
          gap: 0.5rem;
          padding: 0.3rem 0;
          border-style: dotted;
          border-color: rgba(0, 0, 0, 0.7);
          border-width: 0.5px 0;
          font-size: 0.9rem;
        "
      >
        <span>Powered by <span style="font-weight: bold"> CodeSync</span></span>
        <span>&lt; www.codesyncs.com &gt;</span>
      </div>
    </div>
  </div>
</template>
<script setup lang="ts">
import moment from 'moment';
import receiptDescriptionNote from 'src/utils/receipt-description.json';
import { IPreviewSaleResponse } from 'src/interfaces';
import { computed } from 'vue';
interface IProps {
  receiptDetail: IPreviewSaleResponse | null;
  isFirstSample: 'first' | 'second';
}
const props = withDefaults(defineProps<IProps>(), {
  receiptDetail: null,
  isFirstSample: 'first',
});
const receiptTableColumn = ['Product', 'Qty', 'Price', 'Disc', 'Amt'];
const filteredTableColumn = computed(() => {
  if (props.isFirstSample === 'second') {
    return receiptTableColumn.filter(
      (header) => header === 'Product' || header === 'Qty' || header === 'Amt'
    );
  }
  return receiptTableColumn;
});
</script>
